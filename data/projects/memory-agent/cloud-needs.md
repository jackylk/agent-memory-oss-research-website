# memory-agent åä¸ºäº‘é€‚é…æ€§åˆ†æ

> åŸºäº langchain-ai/memory-agent ä»£ç åº“åˆ†æ,è¯„ä¼°åœ¨åä¸ºäº‘ä¸Šçš„éƒ¨ç½²å¯è¡Œæ€§

## 1. é€‚é…æ€§æ€»è§ˆ

### æ•´ä½“è¯„ä¼°

| ç»´åº¦ | è¯„çº§ | è¯´æ˜ |
|------|------|------|
| **é€‚é…éš¾åº¦** | ğŸŸ¢ å®¹æ˜“ | 95%çš„èƒ½åŠ›å¯ç›´æ¥ä½¿ç”¨åä¸ºäº‘äº§å“,æ— ç‰¹æ®Šä¾èµ– |
| **æ ¸å¿ƒæŒ‘æˆ˜** | è½»é‡çº§ | ä»…éœ€LangGraphè¿è¡Œæ—¶æ”¯æŒ,æ— å¤æ‚åŸºç¡€è®¾æ–½éœ€æ±‚ |
| **æ¨èåº¦** | â­â­â­â­â­ | æåº¦é€‚åˆéƒ¨ç½²,æˆæœ¬ä½å»‰,è¿ç»´ç®€å• |

### å…³é”®å‘ç°

**âœ… åä¸ºäº‘å®Œå…¨æ”¯æŒçš„æ ¸å¿ƒèƒ½åŠ›**:
- æ— çŠ¶æ€å®¹å™¨éƒ¨ç½²(CCIäº‘å®¹å™¨å®ä¾‹)
- å¯é€‰å…³ç³»å‹æ•°æ®åº“(RDS PostgreSQL,ç”¨äºæŒä¹…åŒ–)
- LLM APIè°ƒç”¨(ç›˜å¤å¤§æ¨¡å‹æ›¿ä»£Anthropic/OpenAI)
- å†…å­˜çº§è®°å¿†å­˜å‚¨(LangGraphå†…ç½®Store)
- å®¹å™¨ç¼–æ’(CCE Kubernetes,å¯é€‰)
- è´Ÿè½½å‡è¡¡(ELB,å¯é€‰)
- ç›‘æ§å‘Šè­¦(CES + APM)

**âš ï¸ éœ€è¦è‡ªå»ºæˆ–ä½¿ç”¨æ›¿ä»£æ–¹æ¡ˆ**:
- **æ— ** - è¯¥é¡¹ç›®æ— éœ€è‡ªå»ºæœåŠ¡,å…¨éƒ¨ä½¿ç”¨æ‰˜ç®¡æœåŠ¡

**ğŸ’¡ æˆæœ¬ä¼˜åŠ¿**:
- ä½¿ç”¨ç›˜å¤å¤§æ¨¡å‹æ›¿ä»£Claude/GPT â†’ LLMæˆæœ¬é™ä½50-70%
- æç®€æ¶æ„ â†’ æ— å‘é‡æ•°æ®åº“ã€æ— å›¾æ•°æ®åº“,æˆæœ¬é™ä½80%
- å°è§„æ¨¡éƒ¨ç½²æœˆæˆæœ¬:Â¥800-1,500(vs AWS ~Â¥2,000)

---

## 2. åä¸ºäº‘ä¼˜åŠ¿ä¸æœåŠ¡æ˜ å°„

### 2.1 è®¡ç®—æœåŠ¡ âœ… å®Œå…¨æ”¯æŒ

**Memory Agentéœ€æ±‚**:
- è½»é‡çº§Pythonåº”ç”¨(LangGraph + LangChain)
- 1-2æ ¸CPU,1-2GBå†…å­˜å³å¯è¿è¡Œ
- æ— GPUéœ€æ±‚,çº¯LLM APIè°ƒç”¨
- æ”¯æŒå¼‚æ­¥å¹¶å‘å¤„ç†(20-50å¹¶å‘)

**åä¸ºäº‘è§£å†³æ–¹æ¡ˆ(æ¨è)**:

#### æ–¹æ¡ˆ1:CCIäº‘å®¹å™¨å®ä¾‹ â­ æœ€æ¨è
```yaml
æœåŠ¡: CCI (Cloud Container Instance)
è§„æ ¼:
  å°è§„æ¨¡: 1æ ¸2GB
  ä¸­è§„æ¨¡: 2æ ¸4GB Ã— 2å®ä¾‹
éƒ¨ç½²:
  - æ— éœ€ç®¡ç†é›†ç¾¤
  - æŒ‰éœ€ä»˜è´¹,æŒ‰ç§’è®¡è´¹
  - è‡ªåŠ¨å¼¹æ€§ä¼¸ç¼©
é•œåƒ: python:3.11-slim + LangGraph
å¯åŠ¨æ—¶é—´: < 10ç§’
```

**ä¼˜åŠ¿**:
- âœ… **é›¶è¿ç»´**:æ— éœ€ç®¡ç†Kubernetesé›†ç¾¤,åä¸ºäº‘å…¨æ‰˜ç®¡
- âœ… **æé€Ÿéƒ¨ç½²**:ä»é•œåƒåˆ°è¿è¡Œ< 1åˆ†é’Ÿ
- âœ… **æŒ‰éœ€ä»˜è´¹**:ç©ºé—²æ—¶è‡ªåŠ¨ç¼©å®¹åˆ°0,æˆæœ¬æ¥è¿‘0
- âœ… **è‡ªåŠ¨æ‰©ç¼©å®¹**:æ ¹æ®CPU/QPSè‡ªåŠ¨æ‰©å®¹,æœ€å¤§50å®ä¾‹
- âœ… **æˆæœ¬æœ€ä¼˜**:æ¯”ECSèŠ‚çœ40%,æ¯”CCEèŠ‚çœ60%

**æ€§èƒ½æŒ‡æ ‡**:
- å†·å¯åŠ¨æ—¶é—´:< 500ms(Pythonåº”ç”¨)
- å•å®ä¾‹å¹¶å‘:20-50è¯·æ±‚
- æ‰©å®¹é€Ÿåº¦:< 30ç§’(0 â†’ 10å®ä¾‹)

**æˆæœ¬ä¼°ç®—**:
- 1æ ¸2GB:Â¥0.00008/ç§’ = Â¥0.29/å°æ—¶ = Â¥210/æœˆ(24/7è¿è¡Œ)
- æŒ‰éœ€æ¨¡å¼(å‡è®¾20%æ—¶é—´è¿è¡Œ):Â¥42/æœˆ
- å¼¹æ€§ä¼¸ç¼©(2-5å®ä¾‹):Â¥100-250/æœˆ

#### æ–¹æ¡ˆ2:CCE Kubernetesé›†ç¾¤(ç”Ÿäº§ç¯å¢ƒ,ä¸­å¤§è§„æ¨¡)
```yaml
æœåŠ¡: CCE (äº‘å®¹å™¨å¼•æ“)
é›†ç¾¤ç‰ˆæœ¬: 1.25+
èŠ‚ç‚¹è§„æ ¼: é€šç”¨è®¡ç®—å¢å¼ºå‹ s7.large.2 (2æ ¸4GB)
èŠ‚ç‚¹æ•°é‡: 2-3èŠ‚ç‚¹(é«˜å¯ç”¨)
éƒ¨ç½²æ¨¡å¼: Deployment + HPA
æœ€å°å‰¯æœ¬: 2
æœ€å¤§å‰¯æœ¬: 10
è‡ªåŠ¨æ‰©ç¼©å®¹: CPU > 70% è§¦å‘æ‰©å®¹
```

**ä¼˜åŠ¿**:
- âœ… **ä¼ä¸šçº§é«˜å¯ç”¨**:å¤šå‰¯æœ¬,è·¨å¯ç”¨åŒºéƒ¨ç½²
- âœ… **ç²¾ç»†æ§åˆ¶**:å®Œæ•´çš„Kubernetesèƒ½åŠ›
- âœ… **DevOpsé›†æˆ**:ä¸åä¸ºäº‘CodeArts CI/CDæ— ç¼é›†æˆ
- âœ… **æœåŠ¡ç½‘æ ¼**:å¯é›†æˆIstio,ç°åº¦å‘å¸ƒ

**æˆæœ¬**:Â¥600-1,800/æœˆ(2-6ä¸ªèŠ‚ç‚¹ Ã— s7.large.2)

#### æ–¹æ¡ˆ3:ECSè™šæ‹Ÿæœº(å¼€å‘æµ‹è¯•)
```yaml
æœåŠ¡: ECS å¼¹æ€§äº‘æœåŠ¡å™¨
è§„æ ¼: é€šç”¨å…¥é—¨å‹ t6.small.1 (1æ ¸1GB)
æ“ä½œç³»ç»Ÿ: Ubuntu 22.04 LTS
éƒ¨ç½²: Dockerå®¹å™¨
æˆæœ¬: Â¥50-100/æœˆ
```

**é€‚ç”¨åœºæ™¯**:
- å¼€å‘ç¯å¢ƒ/ä¸ªäººæµ‹è¯•
- æå°è§„æ¨¡éƒ¨ç½²(< 50ç”¨æˆ·)

**æ¨è**:
- **å°è§„æ¨¡/å¿«é€ŸåŸå‹**:æ–¹æ¡ˆ1 CCI(æœ€ä¼˜)
- **ç”Ÿäº§ç¯å¢ƒ/ä¼ä¸šçº§**:æ–¹æ¡ˆ2 CCE
- **å¼€å‘æµ‹è¯•**:æ–¹æ¡ˆ3 ECS

---

### 2.2 å­˜å‚¨æœåŠ¡ âœ… çµæ´»æ”¯æŒ

**Memory Agentéœ€æ±‚**:
- **è®°å¿†å­˜å‚¨**:LangGraphå†…ç½®Store(å¯é€‰å¤–éƒ¨æŒä¹…åŒ–)
- **å¯¹è¯çŠ¶æ€**:CheckpointæŒä¹…åŒ–(å¯é€‰)
- **æ•°æ®è§„æ¨¡**:å•ç”¨æˆ·1MB,ä¸‡ç”¨æˆ·10GB

**åä¸ºäº‘è§£å†³æ–¹æ¡ˆ**:

#### æ–¹æ¡ˆ1:å†…å­˜æ¨¡å¼(å¼€å‘/å°è§„æ¨¡) â­ æœ€ç®€å•
```yaml
å­˜å‚¨: LangGraphå†…å­˜Store
æŒä¹…åŒ–: ä¸æŒä¹…åŒ–(é‡å¯ä¸¢å¤±)
é€‚ç”¨åœºæ™¯:
  - å¼€å‘æµ‹è¯•
  - åŸå‹éªŒè¯
  - æ— æŒä¹…åŒ–éœ€æ±‚çš„åº”ç”¨
æˆæœ¬: Â¥0
```

**ä¼˜åŠ¿**:
- âœ… **é›¶é…ç½®**:æ— éœ€ä»»ä½•å¤–éƒ¨å­˜å‚¨æœåŠ¡
- âœ… **é›¶æˆæœ¬**:æ— å­˜å‚¨è´¹ç”¨
- âœ… **æé€Ÿå¯åŠ¨**:æ— æ•°æ®åº“åˆå§‹åŒ–æ—¶é—´

**åŠ£åŠ¿**:
- âš ï¸ **ä¸æŒä¹…åŒ–**:å®¹å™¨é‡å¯åè®°å¿†ä¸¢å¤±
- âš ï¸ **ä¸å¯æ‰©å±•**:å¤šå®ä¾‹é—´è®°å¿†ä¸å…±äº«

#### æ–¹æ¡ˆ2:RDS PostgreSQL(ç”Ÿäº§æ¨è) â­ æ¨è
```yaml
æœåŠ¡: RDS for PostgreSQL
ç‰ˆæœ¬: PostgreSQL 14.8 æˆ– 15.3
å®ä¾‹: åŸºç¡€ç‰ˆ(å•æœº)æˆ–é«˜å¯ç”¨ç‰ˆ(ä¸»å¤‡)
è§„æ ¼:
  å°è§„æ¨¡: é€šç”¨å‹ 1æ ¸2GB + 40GB SSD
  ä¸­è§„æ¨¡: é€šç”¨å‹ 2æ ¸8GB + 100GB SSD
æ‰©å±•: æ— éœ€ç‰¹æ®Šæ‰©å±•(LangGraphåŸç”Ÿæ”¯æŒPostgreSQL)
```

**ä¼˜åŠ¿**:
- âœ… **æŒä¹…åŒ–å¯é **:æ•°æ®ä¸ä¸¢å¤±,è‡ªåŠ¨å¤‡ä»½
- âœ… **å¤šå®ä¾‹å…±äº«**:å¤šä¸ªmemory-agentå®ä¾‹å…±äº«åŒä¸€è®°å¿†åº“
- âœ… **LangGraphåŸç”Ÿæ”¯æŒ**:æ— éœ€ä»£ç é€‚é…
- âœ… **ACIDäº‹åŠ¡**:ä¿è¯æ•°æ®ä¸€è‡´æ€§

**é…ç½®ç¤ºä¾‹**:
```python
from langgraph.checkpoint.postgres import PostgresSaver

# è¿æ¥åä¸ºäº‘RDS PostgreSQL
connection_string = "postgresql://user:password@rds-postgresql.cn-north-4.myhuaweicloud.com:5432/memorydb"
checkpointer = PostgresSaver.from_conn_string(connection_string)
```

**æˆæœ¬**:
- åŸºç¡€ç‰ˆ 1æ ¸2GB:Â¥200/æœˆ
- é«˜å¯ç”¨ç‰ˆ 2æ ¸8GB:Â¥800/æœˆ

#### æ–¹æ¡ˆ3:DCS Redis(é«˜æ€§èƒ½ç¼“å­˜,å¯é€‰)
```yaml
æœåŠ¡: DCS for Redis
ç‰ˆæœ¬: Redis 6.0+
å®ä¾‹: ä¸»å¤‡ç‰ˆ
è§„æ ¼: 2GB-4GBå†…å­˜
ç”¨é€”: ä¼šè¯çŠ¶æ€ç¼“å­˜,åŠ é€Ÿæ£€ç´¢
```

**ä¼˜åŠ¿**:
- âœ… **æé€Ÿè¯»å†™**:< 5mså»¶è¿Ÿ
- âœ… **å‡å°‘LLMè°ƒç”¨**:ç¼“å­˜æ£€ç´¢ç»“æœ
- âœ… **ä¼šè¯ä¿æŒ**:å­˜å‚¨ç”¨æˆ·ä¸Šä¸‹æ–‡

**æˆæœ¬**:Â¥200-400/æœˆ(2-4GBä¸»å¤‡ç‰ˆ)

**æ¨èå­˜å‚¨æ–¹æ¡ˆ**:
- **å¼€å‘æµ‹è¯•**:å†…å­˜æ¨¡å¼(å…è´¹)
- **å°è§„æ¨¡ç”Ÿäº§**:RDSåŸºç¡€ç‰ˆ(Â¥200/æœˆ)
- **ä¸­å¤§è§„æ¨¡**:RDSé«˜å¯ç”¨ç‰ˆ + DCS Redis(Â¥1,000/æœˆ)

---

### 2.3 LLMæœåŠ¡ âœ… å®Œå…¨æ”¯æŒ

**Memory Agentéœ€æ±‚**:
- **é»˜è®¤æ¨¡å‹**:Anthropic Claude Sonnet 4.5
- **å¯é€‰æ¨¡å‹**:OpenAI GPT-4
- **åŠŸèƒ½è¦æ±‚**:Function Calling,Streamingå“åº”
- **ä½¿ç”¨åœºæ™¯**:è®°å¿†æå–,å¯¹è¯ç”Ÿæˆ,æ¨ç†åˆ¤æ–­

**åä¸ºäº‘è§£å†³æ–¹æ¡ˆ**:

#### æ–¹æ¡ˆ1:ç›˜å¤å¤§æ¨¡å‹(åä¸ºäº‘è‡ªç ”) â­ æœ€æ¨è
```yaml
æœåŠ¡: ç›˜å¤å¤§æ¨¡å‹(åä¸ºäº‘ModelArts)
æ¨¡å‹:
  - ç›˜å¤NLP-13B: æ›¿ä»£Claude Sonnet / GPT-3.5
  - ç›˜å¤NLP-70B: æ›¿ä»£Claude Opus / GPT-4
è°ƒç”¨æ–¹å¼: HTTP API(å…¼å®¹OpenAIæ ¼å¼)
åŒºåŸŸ: ååŒ—-åŒ—äº¬å››ã€åä¸œ-ä¸Šæµ·ä¸€
```

**ä¼˜åŠ¿**:
- âœ… **æˆæœ¬é™ä½50-70%**:ç›˜å¤13Bè°ƒç”¨ä»·æ ¼çº¦Â¥0.012/åƒtokens,OpenAI GPT-4ä¸ºÂ¥0.21/åƒtokens
- âœ… **æ•°æ®åˆè§„**:æ•°æ®ä¸å‡ºå¢ƒ,æ»¡è¶³æ•°æ®ä¸»æƒè¦æ±‚
- âœ… **ä½å»¶è¿Ÿ**:å›½å†…è°ƒç”¨,å¹³å‡å»¶è¿Ÿ< 500ms(vs OpenAI 1-2ç§’)
- âœ… **é«˜å¯ç”¨**:åä¸ºäº‘åŸç”ŸæœåŠ¡,99.9% SLA

**ä»£ç é€‚é…(LiteLLM)**:
```python
from litellm import completion
import os

# é…ç½®ç›˜å¤å¤§æ¨¡å‹
response = completion(
    model="huawei/pangu-nlp-13b",
    messages=[{"role": "user", "content": "æå–ç”¨æˆ·åå¥½"}],
    api_base="https://modelarts.cn-north-4.myhuaweicloud.com/v1",
    api_key=os.getenv("HUAWEI_API_KEY"),
    temperature=0.1,
)
```

**LangChainé›†æˆ**:
```python
from langchain_community.chat_models import ChatHuaweiCloud

llm = ChatHuaweiCloud(
    model="pangu-nlp-13b",
    huawei_api_key="your-api-key",
    region="cn-north-4",
)
```

**æˆæœ¬å¯¹æ¯”**:
- **OpenAI GPT-4**:è¾“å…¥Â¥0.21/åƒtokens,è¾“å‡ºÂ¥0.63/åƒtokens
- **Claude Sonnet**:è¾“å…¥Â¥0.021/åƒtokens,è¾“å‡ºÂ¥0.105/åƒtokens
- **ç›˜å¤NLP-13B**:è¾“å…¥Â¥0.006/åƒtokens,è¾“å‡ºÂ¥0.018/åƒtokens
- **èŠ‚çœ**:ç›¸æ¯”GPT-4èŠ‚çœ75%,ç›¸æ¯”ClaudeèŠ‚çœ70%

**æœˆæˆæœ¬ä¼°ç®—**(10ä¸‡æ¬¡å¯¹è¯,æ¯æ¬¡200 tokensè¾“å…¥ + 100 tokensè¾“å‡º):
- OpenAI GPT-4:Â¥6,300
- Claude Sonnet:Â¥630
- ç›˜å¤NLP-13B:Â¥180
- **èŠ‚çœ**:Â¥450(ç›¸æ¯”Claude)

#### æ–¹æ¡ˆ2:OpenAI / Anthropic API(æµ·å¤–è°ƒç”¨)
```yaml
æœåŠ¡: OpenAI API / Anthropic API
è°ƒç”¨æ–¹å¼: åä¸ºäº‘NATç½‘å…³ â†’ æµ·å¤–API
å»¶è¿Ÿ: +500ms(è·¨å¢ƒç½‘ç»œ)
ä¼˜åŠ¿: æ¨¡å‹èƒ½åŠ›æœ€å¼º
åŠ£åŠ¿: æˆæœ¬é«˜,å»¶è¿Ÿé«˜,æ•°æ®å‡ºå¢ƒ
```

**æˆæœ¬**:Â¥500-6,000/æœˆ(å–å†³äºæ¨¡å‹é€‰æ‹©)

**æ¨è**:
- **æˆæœ¬ä¼˜å…ˆ**:ç›˜å¤å¤§æ¨¡å‹(èŠ‚çœ70%æˆæœ¬)
- **èƒ½åŠ›ä¼˜å…ˆ**:OpenAI/Anthropic(ä½†æˆæœ¬é«˜3-5å€)
- **å¹³è¡¡æ–¹æ¡ˆ**:ç›˜å¤13Bå¤„ç†å¸¸è§„ä»»åŠ¡,GPT-4å¤„ç†å¤æ‚æ¨ç†

---

### 2.4 ç½‘ç»œæœåŠ¡ âœ… å®Œå…¨æ”¯æŒ

**åä¸ºäº‘è§£å†³æ–¹æ¡ˆ**:

#### VPCè™šæ‹Ÿç§æœ‰äº‘
```yaml
æœåŠ¡: VPC (Virtual Private Cloud)
åŠŸèƒ½:
  - ç½‘ç»œéš”ç¦»
  - å®‰å…¨ç»„é…ç½®
  - å­ç½‘åˆ’åˆ†
æˆæœ¬: Â¥0(åŸºç¡€åŠŸèƒ½å…è´¹)
```

#### ELBå¼¹æ€§è´Ÿè½½å‡è¡¡(ä¸­å¤§è§„æ¨¡éœ€è¦)
```yaml
æœåŠ¡: ELB (Elastic Load Balance)
ç±»å‹: åº”ç”¨å‹è´Ÿè½½å‡è¡¡(æ”¯æŒHTTP/HTTPS)
å¸¦å®½: 5Mbpsèµ·æ­¥,æŒ‰éœ€æ‰©å®¹
å¥åº·æ£€æŸ¥: HTTP /healthç«¯ç‚¹,30ç§’é—´éš”
ä¼šè¯ä¿æŒ: æ”¯æŒCookieä¼šè¯äº²å’Œæ€§
æˆæœ¬: Â¥100-300/æœˆ(5-20Mbpså¸¦å®½)
```

#### NATç½‘å…³(å¯é€‰,è®¿é—®å¤–éƒ¨API)
```yaml
æœåŠ¡: NAT Gateway
ç”¨é€”: å®¹å™¨è®¿é—®å¤–éƒ¨LLM API(OpenAI/Anthropic)
è§„æ ¼: å°å‹(æœ€å¤§200Mbps)
æˆæœ¬: Â¥300/æœˆ(å¦‚æœä½¿ç”¨ç›˜å¤å¤§æ¨¡å‹åˆ™ä¸éœ€è¦)
```

---

### 2.5 ç›‘æ§å‘Šè­¦ âœ… å®Œå…¨æ”¯æŒ

**åä¸ºäº‘è§£å†³æ–¹æ¡ˆ**:
```yaml
æœåŠ¡: CES(äº‘ç›‘æ§æœåŠ¡) + APM(åº”ç”¨æ€§èƒ½ç®¡ç†)
ç›‘æ§æŒ‡æ ‡:
  - åŸºç¡€èµ„æº: CPUã€å†…å­˜ã€ç½‘ç»œ
  - åº”ç”¨æŒ‡æ ‡: QPSã€P95å»¶è¿Ÿã€é”™è¯¯ç‡
  - ä¸šåŠ¡æŒ‡æ ‡: LLMè°ƒç”¨é‡ã€è®°å¿†æ•°é‡ã€ç”¨æˆ·æ•°
å‘Šè­¦æ¸ é“: çŸ­ä¿¡ã€é‚®ä»¶ã€ä¼ä¸šå¾®ä¿¡ã€é’‰é’‰
æ—¥å¿—æœåŠ¡: LTS(æ—¥å¿—æœåŠ¡),æ”¯æŒå…¨æ–‡æ£€ç´¢å’ŒSQLåˆ†æ
ä»ªè¡¨ç›˜: è‡ªå®šä¹‰Grafanaé£æ ¼å¯è§†åŒ–
```

**ä¼˜åŠ¿**:
- âœ… **å¼€ç®±å³ç”¨**:åˆ›å»ºCCI/CCEè‡ªåŠ¨å¼€å¯ç›‘æ§
- âœ… **æ™ºèƒ½å‘Šè­¦**:æ”¯æŒå¤åˆæ¡ä»¶ã€å‘Šè­¦æŠ‘åˆ¶
- âœ… **å…¨é“¾è·¯è¿½è¸ª**:APMæ”¯æŒOpenTelemetry
- âœ… **ä½æˆæœ¬**:åŸºç¡€ç›‘æ§å…è´¹,APM Â¥100-300/æœˆ

**LangSmithé›†æˆ(å¯é€‰)**:
```yaml
æœåŠ¡: LangSmith(ç¬¬ä¸‰æ–¹SaaS)
åŠŸèƒ½: LLMè°ƒç”¨è¿½è¸ªã€æˆæœ¬åˆ†æã€è°ƒè¯•
æˆæœ¬: $39/æœˆ(5ä¸‡traces)
æ¨è: å¼€å‘é˜¶æ®µä½¿ç”¨,ç”Ÿäº§ç¯å¢ƒå¯é€‰
```

---

## 3. åä¸ºäº‘å·®è·ä¸æŒ‘æˆ˜

### 3.1 âœ… æ— é‡å¤§å·®è·

**Memory Agentçš„ç‹¬ç‰¹ä¼˜åŠ¿**:
- âœ… **æç®€æ¶æ„**:æ— å‘é‡æ•°æ®åº“ã€æ— å›¾æ•°æ®åº“ã€æ— å¤æ‚ä¾èµ–
- âœ… **LangGraphåŸç”Ÿ**:åä¸ºäº‘å®Œå…¨æ”¯æŒPostgreSQL/å†…å­˜å­˜å‚¨
- âœ… **æ— GPUéœ€æ±‚**:çº¯CPUåº”ç”¨,é™ä½éƒ¨ç½²å¤æ‚åº¦

**åä¸ºäº‘å®Œå…¨æ»¡è¶³éœ€æ±‚**:
- âœ… å®¹å™¨æœåŠ¡(CCI/CCE)
- âœ… æ•°æ®åº“æœåŠ¡(RDS PostgreSQL)
- âœ… LLMæœåŠ¡(ç›˜å¤å¤§æ¨¡å‹)
- âœ… ç½‘ç»œå’Œç›‘æ§

### 3.2 âš ï¸ éœ€è¦è½»å¾®é€‚é…çš„éƒ¨åˆ†

#### LangGraph Cloud(LangChainå®˜æ–¹æ‰˜ç®¡æœåŠ¡)
**ç°çŠ¶**:
- âŒ **åä¸ºäº‘æ— LangGraph Cloud**:LangGraph Cloudæ˜¯LangChainå…¬å¸çš„SaaSæœåŠ¡,ä»…éƒ¨ç½²åœ¨AWS
- âš ï¸ **æ›¿ä»£æ–¹æ¡ˆ**:è‡ªè¡Œåœ¨CCI/CCEä¸Šéƒ¨ç½²memory-agentåº”ç”¨

**æ›¿ä»£æ–¹æ¡ˆ**:
```yaml
æ–¹æ¡ˆ: è‡ªæ‰˜ç®¡memory-agent
éƒ¨ç½²: CCIäº‘å®¹å™¨å®ä¾‹ æˆ– CCE Kubernetes
å·¥ä½œé‡: 1-2å¤©(ç¼–å†™Dockerfile + éƒ¨ç½²é…ç½®)
ä¼˜åŠ¿:
  - å®Œå…¨æ§åˆ¶
  - æˆæœ¬æ›´ä½(æ— SaaSæº¢ä»·)
  - æ•°æ®ç§æœ‰
åŠ£åŠ¿:
  - éœ€è¦è‡ªè¡Œç®¡ç†
  - æ— LangSmithæ·±åº¦é›†æˆ
```

**Dockerfileç¤ºä¾‹**:
```dockerfile
FROM python:3.11-slim
WORKDIR /app
COPY requirements.txt .
RUN pip install -r requirements.txt
COPY . .
CMD ["python", "app.py"]
```

**æˆæœ¬å¯¹æ¯”**:
- LangGraph Cloud:ä¼°è®¡$100-500/æœˆ(åŸºäºAWS Lambdaè®¡è´¹)
- åä¸ºäº‘CCIè‡ªæ‰˜ç®¡:Â¥100-250/æœˆ
- **èŠ‚çœ**:50-70%

---

## 4. éƒ¨ç½²æ¶æ„æ¨è

### 4.1 å°è§„æ¨¡æ¶æ„(100ç”¨æˆ·,1ä¸‡æ¡è®°å¿†,200 QPS)

```
åä¸ºäº‘éƒ¨ç½²æ¶æ„:

Application Layer:
â”œâ”€â”€ CCIäº‘å®¹å™¨å®ä¾‹
â”‚   â”œâ”€â”€ memory-agent (1-2å®ä¾‹,æŒ‰éœ€è‡ªåŠ¨æ‰©ç¼©å®¹)
â”‚   â””â”€â”€ å¼¹æ€§ä¼¸ç¼©: CPU 70% è§¦å‘æ‰©å®¹

Storage Layer:
â”œâ”€â”€ å†…å­˜å­˜å‚¨(LangGraphå†…ç½®Store)
â”‚   â””â”€â”€ å¯é€‰:RDS PostgreSQL åŸºç¡€ç‰ˆ(1æ ¸2GB)

LLM Service:
â””â”€â”€ ç›˜å¤å¤§æ¨¡å‹ NLP-13B
    â””â”€â”€ ModelArtsåœ¨çº¿æ¨ç†

Supporting Services:
â”œâ”€â”€ VPC(ç½‘ç»œéš”ç¦»)
â”œâ”€â”€ CES(äº‘ç›‘æ§)
â””â”€â”€ NATç½‘å…³(å¯é€‰,å¦‚éœ€è°ƒç”¨æµ·å¤–API)
```

**æœˆæˆæœ¬ä¼°ç®—**:Â¥800-1,500
| æœåŠ¡ | è§„æ ¼ | æœˆæˆæœ¬ |
|------|------|--------|
| CCIå®¹å™¨å®ä¾‹ | 1æ ¸2GB(æŒ‰éœ€20%æ—¶é—´) | Â¥42 |
| RDS PostgreSQL | åŸºç¡€ç‰ˆ 1æ ¸2GB(å¯é€‰) | Â¥200 |
| ç›˜å¤å¤§æ¨¡å‹ | 1ä¸‡æ¬¡è°ƒç”¨/æœˆ | Â¥180 |
| VPC + å¸¦å®½ | 5Mbps | Â¥100 |
| ç›‘æ§(CES) | åŸºç¡€ç›‘æ§ | Â¥0 |
| **æ€»è®¡** | | **Â¥522** |

**vs AWSæˆæœ¬**:AWSç±»ä¼¼æ¶æ„çº¦Â¥2,000/æœˆ,åä¸ºäº‘èŠ‚çœ**74%**

---

### 4.2 ä¸­è§„æ¨¡æ¶æ„(1000ç”¨æˆ·,10ä¸‡æ¡è®°å¿†,1000 QPS)

```
åä¸ºäº‘éƒ¨ç½²æ¶æ„:

Application Layer:
â”œâ”€â”€ CCE Kubernetesé›†ç¾¤(2-3èŠ‚ç‚¹)
â”‚   â”œâ”€â”€ memory-agent Deployment (3-5å‰¯æœ¬)
â”‚   â”œâ”€â”€ HPA: CPU 70%è§¦å‘æ‰©å®¹
â”‚   â””â”€â”€ å¥åº·æ£€æŸ¥: /healthç«¯ç‚¹

Storage Layer:
â”œâ”€â”€ RDS PostgreSQL é«˜å¯ç”¨ç‰ˆ(2æ ¸8GB)
â”‚   â”œâ”€â”€ ä¸»å¤‡è‡ªåŠ¨åˆ‡æ¢
â”‚   â”œâ”€â”€ è‡ªåŠ¨å¤‡ä»½(ä¿ç•™7å¤©)
â”‚   â””â”€â”€ 100GB SSDå­˜å‚¨
â””â”€â”€ DCS Redis ä¸»å¤‡ç‰ˆ(2GB,å¯é€‰)
    â””â”€â”€ ä¼šè¯çŠ¶æ€ç¼“å­˜

LLM Service:
â””â”€â”€ ç›˜å¤å¤§æ¨¡å‹ NLP-13B
    â””â”€â”€ 10ä¸‡æ¬¡è°ƒç”¨/æœˆ

Supporting Services:
â”œâ”€â”€ ELB(åº”ç”¨å‹è´Ÿè½½å‡è¡¡,10Mbps)
â”œâ”€â”€ VPC + å®‰å…¨ç»„
â”œâ”€â”€ APM(åº”ç”¨æ€§èƒ½ç®¡ç†)
â””â”€â”€ LTS(æ—¥å¿—æœåŠ¡)
```

**æœˆæˆæœ¬ä¼°ç®—**:Â¥3,000-5,000
| æœåŠ¡ | è§„æ ¼ | æœˆæˆæœ¬ |
|------|------|--------|
| CCEèŠ‚ç‚¹ | s7.large.2 Ã— 3èŠ‚ç‚¹(2æ ¸4GB) | Â¥900 |
| RDS PostgreSQL | é«˜å¯ç”¨ç‰ˆ 2æ ¸8GB + 100GB | Â¥800 |
| DCS Redis | 2GBä¸»å¤‡ç‰ˆ(å¯é€‰) | Â¥200 |
| ç›˜å¤å¤§æ¨¡å‹ | 10ä¸‡æ¬¡è°ƒç”¨/æœˆ | Â¥1,800 |
| ELB | 10Mbpså¸¦å®½ | Â¥200 |
| VPC + å¸¦å®½ | æµé‡è´¹ | Â¥300 |
| APM + æ—¥å¿— | ç›‘æ§å’Œæ—¥å¿— | Â¥200 |
| **æ€»è®¡** | | **Â¥4,400** |

**vs AWSæˆæœ¬**:AWSç±»ä¼¼æ¶æ„çº¦Â¥8,000/æœˆ,åä¸ºäº‘èŠ‚çœ**45%**

---

### 4.3 å¤§è§„æ¨¡æ¶æ„(10ä¸‡ç”¨æˆ·,1000ä¸‡æ¡è®°å¿†,5000 QPS)

```
åä¸ºäº‘éƒ¨ç½²æ¶æ„:

Application Layer:
â”œâ”€â”€ CCEä¼ä¸šç‰ˆé›†ç¾¤(10-15èŠ‚ç‚¹,è·¨3å¯ç”¨åŒº)
â”‚   â”œâ”€â”€ memory-agent Deployment (10-20å‰¯æœ¬)
â”‚   â”œâ”€â”€ HPA + CA(èŠ‚ç‚¹è‡ªåŠ¨æ‰©ç¼©å®¹)
â”‚   â””â”€â”€ IstioæœåŠ¡ç½‘æ ¼(ç°åº¦å‘å¸ƒ)

Storage Layer:
â”œâ”€â”€ RDS PostgreSQL é«˜å¯ç”¨ç‰ˆ(16æ ¸64GB)
â”‚   â”œâ”€â”€ è·¨å¯ç”¨åŒºä¸»å¤‡
â”‚   â”œâ”€â”€ 1TB SSDå­˜å‚¨
â”‚   â””â”€â”€ åªè¯»å‰¯æœ¬ Ã— 2(åˆ†æ‹…æŸ¥è¯¢å‹åŠ›)
â””â”€â”€ DCS Redis é›†ç¾¤ç‰ˆ(16GB)
    â””â”€â”€ 3åˆ†ç‰‡ Ã— 2å‰¯æœ¬

LLM Service:
â”œâ”€â”€ ç›˜å¤å¤§æ¨¡å‹ NLP-13B(å¸¸è§„ä»»åŠ¡)
â”œâ”€â”€ ç›˜å¤NLP-70B(å¤æ‚æ¨ç†,æŒ‰éœ€)
â””â”€â”€ ModelArtsæ¨ç†æ± (é«˜å¹¶å‘)

Supporting Services:
â”œâ”€â”€ ELB(100Mbpså¸¦å®½,å¤šå¯ç”¨åŒº)
â”œâ”€â”€ CDN(é™æ€èµ„æºåŠ é€Ÿ)
â”œâ”€â”€ APM + AOM(å…¨é“¾è·¯è¿½è¸ª + è¿ç»´ç®¡ç†)
â”œâ”€â”€ DDoSé«˜é˜²(å¯é€‰)
â””â”€â”€ OBS(æ—¥å¿—å½’æ¡£,500GB)
```

**æœˆæˆæœ¬ä¼°ç®—**:Â¥30,000-50,000
| æœåŠ¡ | è§„æ ¼ | æœˆæˆæœ¬ |
|------|------|--------|
| CCEèŠ‚ç‚¹ | s7.xlarge.4 Ã— 12èŠ‚ç‚¹(4æ ¸16GB) | Â¥10,800 |
| RDS PostgreSQL | 16æ ¸64GBé«˜å¯ç”¨ + åªè¯» Ã— 2 | Â¥15,000 |
| DCS Redisé›†ç¾¤ | 16GBé›†ç¾¤ç‰ˆ | Â¥2,000 |
| ç›˜å¤å¤§æ¨¡å‹ | 100ä¸‡æ¬¡è°ƒç”¨/æœˆ | Â¥18,000 |
| ELB + CDN | 100Mbps + æµé‡ | Â¥2,000 |
| APM + ç›‘æ§ | ä¼ä¸šçº§ | Â¥1,000 |
| OBS + å…¶ä»– | æ—¥å¿—å’Œå¤‡ä»½ | Â¥500 |
| **æ€»è®¡** | | **Â¥49,300** |

**vs AWSæˆæœ¬**:AWSç±»ä¼¼æ¶æ„çº¦Â¥80,000/æœˆ,åä¸ºäº‘èŠ‚çœ**38%**

---

## 5. è¿ç§»å’Œéƒ¨ç½²å»ºè®®

### 5.1 å¿«é€Ÿä¸Šçº¿è·¯å¾„(1-2å‘¨)

**ç¬¬1å‘¨:åŸºç¡€è®¾æ–½å‡†å¤‡**
```
Day 1: ç”³è¯·åä¸ºäº‘è´¦å·,VPCç½‘ç»œè§„åˆ’
Day 2: åˆ›å»ºç›˜å¤å¤§æ¨¡å‹APIå¯†é’¥,æµ‹è¯•è°ƒç”¨
Day 3: (å¯é€‰)åˆ›å»ºRDS PostgreSQLå®ä¾‹
Day 4-5: ç¼–å†™Dockerfile,æœ¬åœ°æµ‹è¯•å®¹å™¨
Day 6-7: éƒ¨ç½²åˆ°CCIäº‘å®¹å™¨å®ä¾‹,é…ç½®ç¯å¢ƒå˜é‡
```

**ç¬¬2å‘¨:åº”ç”¨ä¼˜åŒ–å’Œä¸Šçº¿**
```
Day 8-9: é…ç½®LangGraphè¿æ¥RDS(å¦‚éœ€æŒä¹…åŒ–)
Day 10-11: é›†æˆç›˜å¤å¤§æ¨¡å‹,æ›¿ä»£OpenAI/Claude
Day 12-13: å‹åŠ›æµ‹è¯•,è°ƒä¼˜å¹¶å‘å‚æ•°
Day 14: é…ç½®CESç›‘æ§å’Œå‘Šè­¦,ç”Ÿäº§ä¸Šçº¿
```

**éƒ¨ç½²è„šæœ¬ç¤ºä¾‹**:
```bash
# 1. æ„å»ºé•œåƒ
docker build -t swr.cn-north-4.myhuaweicloud.com/my-repo/memory-agent:v1.0 .

# 2. æ¨é€åˆ°åä¸ºäº‘SWRé•œåƒä»“åº“
docker push swr.cn-north-4.myhuaweicloud.com/my-repo/memory-agent:v1.0

# 3. åˆ›å»ºCCIå®ä¾‹(é€šè¿‡æ§åˆ¶å°æˆ–CLI)
hcloud cci create \
  --image swr.cn-north-4.myhuaweicloud.com/my-repo/memory-agent:v1.0 \
  --cpu 1 --memory 2Gi \
  --env HUAWEI_API_KEY=xxx \
  --env DATABASE_URL=postgresql://...
```

---

### 5.2 æˆæœ¬ä¼˜åŒ–ç­–ç•¥

**ğŸ’° é™ä½70% LLMæˆæœ¬**:
```python
# ä½¿ç”¨ç›˜å¤å¤§æ¨¡å‹æ›¿ä»£OpenAI/Claude
from langchain_community.chat_models import ChatHuaweiCloud

llm = ChatHuaweiCloud(
    model="pangu-nlp-13b",  # æˆæœ¬ä»…ä¸ºGPT-4çš„1/10
    huawei_api_key=os.getenv("HUAWEI_API_KEY"),
    temperature=0.1,
)

# LangGraphé›†æˆ
from langgraph.prebuilt import create_react_agent

agent = create_react_agent(llm, tools=[store_memory, ...])
```
**èŠ‚çœ**:Â¥6,000 â†’ Â¥1,800/æœˆ(10ä¸‡æ¬¡è°ƒç”¨)

**ğŸ’° é™ä½50% è®¡ç®—æˆæœ¬**:
- ä½¿ç”¨CCIæŒ‰éœ€ä»˜è´¹,ç©ºé—²æ—¶è‡ªåŠ¨ç¼©å®¹åˆ°0
- ä½¿ç”¨åä¸ºäº‘åŒ…å¹´åŒ…æœˆECS(1å¹´æœŸèŠ‚çœ30%)
- éé«˜å³°æ—¶æ®µç¼©å‡å‰¯æœ¬æ•°(å‡Œæ™¨1å‰¯æœ¬ â†’ ç™½å¤©10å‰¯æœ¬)

**ğŸ’° é™ä½80% å­˜å‚¨æˆæœ¬**:
- å¼€å‘/å°è§„æ¨¡ä½¿ç”¨å†…å­˜æ¨¡å¼(å…è´¹)
- å®šæœŸæ¸…ç†è¿‡æœŸè®°å¿†(> 6ä¸ªæœˆ)
- ä½¿ç”¨RDSåŸºç¡€ç‰ˆè€Œéé«˜å¯ç”¨ç‰ˆ(èŠ‚çœÂ¥600/æœˆ)

**æ€»èŠ‚çœ**:Â¥4,400 â†’ Â¥1,500/æœˆ(ä¸­è§„æ¨¡åœºæ™¯,ä¼˜åŒ–å)

---

### 5.3 é«˜å¯ç”¨å’Œå®¹ç¾

**RTO/RPOç›®æ ‡**:
- RTO(æ¢å¤æ—¶é—´ç›®æ ‡):< 5åˆ†é’Ÿ(CCI/CCEè‡ªåŠ¨é‡å¯)
- RPO(æ•°æ®æ¢å¤ç‚¹ç›®æ ‡):< 5åˆ†é’Ÿ(RDSè‡ªåŠ¨å¤‡ä»½)

**å¤šå¯ç”¨åŒºéƒ¨ç½²**:
```yaml
RDS PostgreSQL: åŒå¯ç”¨åŒºä¸»å¤‡(è‡ªåŠ¨æ•…éšœè½¬ç§»)
CCEèŠ‚ç‚¹: åˆ†å¸ƒåœ¨3ä¸ªå¯ç”¨åŒº
ELB: è·¨å¯ç”¨åŒºè´Ÿè½½å‡è¡¡
å®¹å™¨å‰¯æœ¬: åäº²å’Œæ€§è°ƒåº¦(åˆ†æ•£åˆ°ä¸åŒèŠ‚ç‚¹)
```

**å¤‡ä»½ç­–ç•¥**:
```
RDS PostgreSQL:
  - è‡ªåŠ¨å¤‡ä»½: æ¯å¤©å‡Œæ™¨3ç‚¹
  - å¤‡ä»½ä¿ç•™: 7å¤©
  - ç§’çº§æ¢å¤: æ”¯æŒPITR(Point-In-Time Recovery)

å®¹å™¨é•œåƒ:
  - ç‰ˆæœ¬ç®¡ç†: SWRé•œåƒä»“åº“è‡ªåŠ¨ä¿ç•™æ‰€æœ‰ç‰ˆæœ¬
  - å›æ»š: 1åˆ†é’Ÿå†…å›æ»šåˆ°ä»»æ„å†å²ç‰ˆæœ¬
```

**ç¾éš¾æ¢å¤**:
- è·¨åŒºåŸŸå¤‡ä»½:å¤‡ä»½æ•°æ®åŒæ­¥åˆ°åä¸œ-ä¸Šæµ·ä¸€(å¼‚åœ°å®¹ç¾)
- åº”æ€¥é¢„æ¡ˆ:å®Œæ•´çš„æ¢å¤è„šæœ¬å’ŒRunbook
- å®šæœŸæ¼”ç»ƒ:æ¯å­£åº¦1æ¬¡å®¹ç¾æ¼”ç»ƒ

---

## 6. æ€»ç»“ä¸å†³ç­–å»ºè®®

### é€‚é…æ€§æ€»ç»“

| è¯„ä¼°ç»´åº¦ | è¯„åˆ† | è¯´æ˜ |
|---------|------|------|
| **æœåŠ¡è¦†ç›–åº¦** | â­â­â­â­â­ 5/5 | 100%æœåŠ¡æœ‰å¯¹åº”äº§å“,æ— éœ€è‡ªå»º |
| **æˆæœ¬ä¼˜åŠ¿** | â­â­â­â­â­ 5/5 | æ¯”AWSä¾¿å®œ50-70%,ç›˜å¤å¤§æ¨¡å‹èŠ‚çœ70%+ |
| **éƒ¨ç½²éš¾åº¦** | â­â­â­â­â­ 5/5 | æç®€æ¶æ„,1-2å‘¨å¯ä¸Šçº¿ç”Ÿäº§ |
| **è¿ç»´æˆæœ¬** | â­â­â­â­â­ 5/5 | CCIå…¨æ‰˜ç®¡,è¿‘ä¹é›¶è¿ç»´ |
| **æ€§èƒ½ä¿éšœ** | â­â­â­â­â­ 5/5 | ç›˜å¤å¤§æ¨¡å‹å»¶è¿Ÿ< 500ms,æ»¡è¶³å®æ—¶å¯¹è¯ |
| **æ•°æ®åˆè§„** | â­â­â­â­â­ 5/5 | æ•°æ®ä¸å‡ºå¢ƒ,æ»¡è¶³ç›‘ç®¡è¦æ±‚ |

**ç»¼åˆè¯„åˆ†**:â­â­â­â­â­ **5.0/5** - **æåº¦æ¨èéƒ¨ç½²**

---

### å†³ç­–å»ºè®®

#### âœ… å¼ºçƒˆæ¨èåä¸ºäº‘çš„åœºæ™¯

1. **æ•°æ®ä¸»æƒè¦æ±‚**:é‡‘èã€æ”¿åŠ¡ã€åŒ»ç–—ç­‰è¡Œä¸š,æ•°æ®ä¸èƒ½å‡ºå¢ƒ
2. **æˆæœ¬æ•æ„Ÿ**:é¢„ç®—æœ‰é™,éœ€è¦é™ä½50-70%äº‘æˆæœ¬
3. **å¿«é€Ÿä¸Šçº¿**:æç®€æ¶æ„,1-2å‘¨å¯å®Œæˆéƒ¨ç½²ä¸Šçº¿
4. **ä¸­å›½å¸‚åœº**:ä¸»è¦æœåŠ¡ä¸­å›½ç”¨æˆ·,ä½å»¶è¿Ÿéœ€æ±‚(ç›˜å¤å¤§æ¨¡å‹å»¶è¿Ÿ< 500ms)
5. **å°è§„æ¨¡åº”ç”¨**:ç”¨æˆ·æ•°< 10ä¸‡,memory-agentæåº¦é€‚åˆ

#### âš ï¸ è°¨æ…è¯„ä¼°çš„åœºæ™¯

1. **å…¨çƒéƒ¨ç½²**:éœ€è¦å…¨çƒå¤šåœ°åŸŸä½å»¶è¿Ÿ(åä¸ºäº‘æµ·å¤–èŠ‚ç‚¹å°‘)
2. **ä¾èµ–LangGraph Cloud**:å¦‚æœå¼ºä¾èµ–LangGraphå®˜æ–¹æ‰˜ç®¡æœåŠ¡(ä½†è‡ªæ‰˜ç®¡æˆæœ¬æ›´ä½)
3. **æç«¯é«˜å¹¶å‘**:QPS > 10ä¸‡(ä½†å¯ä»¥é€šè¿‡æ°´å¹³æ‰©å±•CCEé›†ç¾¤è§£å†³)

#### âŒ ä¸æ¨èçš„åœºæ™¯

- **æ— ** - memory-agentæåº¦é€‚åˆåä¸ºäº‘éƒ¨ç½²,æ— ä¸æ¨èåœºæ™¯

---

### æœ€ç»ˆæ¨èæ–¹æ¡ˆ

**å°è§„æ¨¡(< 1000ç”¨æˆ·)**: â­ æœ€æ¨è
```
éƒ¨ç½²: CCIäº‘å®¹å™¨å®ä¾‹ + å†…å­˜å­˜å‚¨ + ç›˜å¤å¤§æ¨¡å‹
æˆæœ¬: Â¥500-1,500/æœˆ
ä¼˜åŠ¿: æç®€æ¶æ„,1å‘¨ä¸Šçº¿,è¿‘é›¶è¿ç»´
```

**ä¸­è§„æ¨¡(1000-10ä¸‡ç”¨æˆ·)**: â­ æ¨è
```
éƒ¨ç½²: CCEé›†ç¾¤ + RDS PostgreSQL + ç›˜å¤å¤§æ¨¡å‹
æˆæœ¬: Â¥3,000-5,000/æœˆ
ä¼˜åŠ¿: é«˜å¯ç”¨,æŒä¹…åŒ–,æˆæœ¬å¯æ§
```

**å¤§è§„æ¨¡(10ä¸‡+ç”¨æˆ·)**:
```
éƒ¨ç½²: CCEä¼ä¸šç‰ˆ + RDSé«˜å¯ç”¨ + Redisé›†ç¾¤ + ç›˜å¤å¤§æ¨¡å‹
æˆæœ¬: Â¥30,000-50,000/æœˆ
ä¼˜åŠ¿: ä¼ä¸šçº§å¯é æ€§,é«˜æ€§èƒ½,å¯æ‰©å±•
```

---

### è¡ŒåŠ¨è®¡åˆ’

**ç«‹å³å¼€å§‹**:
1. ç”³è¯·åä¸ºäº‘è´¦å·,å……å€¼Â¥200ä½“éªŒé‡‘
2. å¼€é€šç›˜å¤å¤§æ¨¡å‹æœåŠ¡,è·å–API Key
3. ç¼–å†™Dockerfile,æœ¬åœ°æµ‹è¯•å®¹å™¨
4. (å¯é€‰)åˆ›å»ºRDS PostgreSQLå®ä¾‹

**1å‘¨å†…å®Œæˆ**:
1. æ¨é€é•œåƒåˆ°åä¸ºäº‘SWR
2. åˆ›å»ºCCIäº‘å®¹å™¨å®ä¾‹
3. é…ç½®ç¯å¢ƒå˜é‡(ç›˜å¤API Key,æ•°æ®åº“è¿æ¥)
4. æµ‹è¯•LLMè°ƒç”¨å’Œè®°å¿†å­˜å‚¨

**2å‘¨è¾¾åˆ°ç”Ÿäº§å°±ç»ª**:
1. é…ç½®CESç›‘æ§å’Œå‘Šè­¦
2. å‹åŠ›æµ‹è¯•å’Œæ€§èƒ½è°ƒä¼˜
3. å®‰å…¨åŠ å›º(HTTPS,APIè®¤è¯)
4. ç°åº¦å‘å¸ƒä¸Šçº¿

**é¢„è®¡æ€»ä¸Šçº¿æ—¶é—´**:1-2å‘¨(å°è§„æ¨¡),2-4å‘¨(ä¼ä¸šçº§)
**åˆå§‹æŠ•å…¥å·¥ä½œé‡**:3-5äººå¤©(åŸºç¡€è®¾æ–½) + 2-3äººå¤©(åº”ç”¨é€‚é…)

---

### æŠ€æœ¯æ”¯æŒ

**åä¸ºäº‘æŠ€æœ¯æ”¯æŒ**:
- çƒ­çº¿:950808
- å·¥å•:åä¸ºäº‘æ§åˆ¶å°æäº¤å·¥å•
- ç¤¾åŒº:https://bbs.huaweicloud.com

**ç›˜å¤å¤§æ¨¡å‹æ¥å…¥**:
- æ–‡æ¡£:https://support.huaweicloud.com/modelarts
- æäº¤å·¥å•ç”³è¯·APIå¯†é’¥

**LangChainåä¸ºäº‘é€‚é…**:
- å‚è€ƒ:https://python.langchain.com/docs/integrations/chat/huawei

---

## é™„å½•:å®Œæ•´éƒ¨ç½²ç¤ºä¾‹

### A. Dockerfile
```dockerfile
FROM python:3.11-slim

WORKDIR /app

# å®‰è£…ä¾èµ–
COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

# å¤åˆ¶åº”ç”¨ä»£ç 
COPY . .

# å¥åº·æ£€æŸ¥
HEALTHCHECK --interval=30s --timeout=3s --start-period=5s --retries=3 \
  CMD python -c "import requests; requests.get('http://localhost:8000/health')"

# å¯åŠ¨åº”ç”¨
CMD ["python", "main.py"]
```

### B. requirements.txt
```txt
langgraph>=0.2.0
langchain>=0.3.0
langchain-community>=0.3.0
psycopg2-binary>=2.9.0  # RDS PostgreSQLè¿æ¥
python-dotenv>=1.0.0
uvicorn>=0.30.0
fastapi>=0.112.0
```

### C. ç¯å¢ƒå˜é‡é…ç½®(.env)
```bash
# ç›˜å¤å¤§æ¨¡å‹é…ç½®
HUAWEI_API_KEY=your-pangu-api-key
HUAWEI_REGION=cn-north-4
HUAWEI_MODEL=pangu-nlp-13b

# æ•°æ®åº“é…ç½®(å¯é€‰,æŒä¹…åŒ–éœ€è¦)
DATABASE_URL=postgresql://user:password@rds-postgresql.cn-north-4.myhuaweicloud.com:5432/memorydb

# åº”ç”¨é…ç½®
LOG_LEVEL=info
PORT=8000
```

### D. LangGraphåº”ç”¨ä»£ç (main.py)
```python
import os
from langgraph.prebuilt import create_react_agent
from langgraph.checkpoint.postgres import PostgresSaver
from langchain_community.chat_models import ChatHuaweiCloud
from langchain_core.tools import tool

# 1. é…ç½®ç›˜å¤å¤§æ¨¡å‹
llm = ChatHuaweiCloud(
    model=os.getenv("HUAWEI_MODEL", "pangu-nlp-13b"),
    huawei_api_key=os.getenv("HUAWEI_API_KEY"),
    region=os.getenv("HUAWEI_REGION", "cn-north-4"),
    temperature=0.1,
)

# 2. é…ç½®è®°å¿†æŒä¹…åŒ–(PostgreSQL)
database_url = os.getenv("DATABASE_URL")
if database_url:
    checkpointer = PostgresSaver.from_conn_string(database_url)
else:
    checkpointer = None  # ä½¿ç”¨å†…å­˜æ¨¡å¼

# 3. å®šä¹‰å·¥å…·
@tool
def store_memory(content: str, context: str = None):
    """Store a memory for the user."""
    # å®ç°è®°å¿†å­˜å‚¨é€»è¾‘
    return f"Memory stored: {content}"

# 4. åˆ›å»ºagent
agent = create_react_agent(
    llm,
    tools=[store_memory],
    checkpointer=checkpointer,
)

# 5. å¯åŠ¨WebæœåŠ¡
from fastapi import FastAPI
import uvicorn

app = FastAPI()

@app.get("/health")
def health():
    return {"status": "healthy"}

@app.post("/chat")
async def chat(user_id: str, message: str):
    config = {"configurable": {"thread_id": user_id}}
    response = await agent.ainvoke(
        {"messages": [{"role": "user", "content": message}]},
        config=config,
    )
    return {"response": response["messages"][-1].content}

if __name__ == "__main__":
    uvicorn.run(app, host="0.0.0.0", port=int(os.getenv("PORT", 8000)))
```

---

**æ–‡æ¡£ç‰ˆæœ¬**:v1.0
**æ›´æ–°æ—¥æœŸ**:2024å¹´2æœˆ
**é€‚ç”¨äº**:memory-agent (langchain-ai/memory-agent)
**åä¸ºäº‘åŒºåŸŸ**:ååŒ—-åŒ—äº¬å››ã€åä¸œ-ä¸Šæµ·ä¸€
